{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\JWT - Auth\\\\frontend\\\\src\\\\components\\\\Navbar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport jwt_decode from \"jwt-decode\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Navbar = () => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [preview, setPreview] = useState('');\n  const [expire, setExpire] = useState([]);\n  const [token, setToken] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    refreshToken();\n    Me();\n  }, []);\n\n  const refreshToken = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/token');\n      setToken(response.data.accessToken);\n      const decoded = jwt_decode(response.data.accessToken);\n      setExpire(decoded.exp);\n    } catch (error) {\n      if (error.response) {\n        navigate('/');\n      }\n    }\n  };\n\n  const Me = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/me');\n      setPreview(response.data.url);\n      setName(response.data.name);\n    } catch (error) {\n      if (error.response) {\n        navigate('/');\n      }\n    }\n  };\n\n  const axiosJWT = axios.create();\n  axiosJWT.interceptors.request.use(async config => {\n    const currentDate = new Date();\n\n    if (expire * 1000 < currentDate.getTime()) {\n      const response = await axios.get('http://localhost:3001/token');\n      config.headers.Authorization = `Bearer ${response.data.accessToken}`;\n      setToken(response.data.accessToken);\n      const decoded = jwt_decode(response.data.accessToken);\n      setName(decoded.name);\n      setExpire(decoded.exp);\n    }\n\n    return config;\n  }, error => {\n    return Promise.reject(error); //\n  });\n\n  const Logout = async () => {\n    try {\n      await axios.delete('http://localhost:3001/logout');\n      navigate('/');\n    } catch (error) {\n      console.info(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    id: \"navbar-main\",\n    className: \"navbar is-fixed-top\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-brand\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"navbar-item is-hidden-desktop jb-aside-mobile-toggle\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"icon\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"mdi mdi-forwardburger mdi-24px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-brand is-right\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"navbar-item is-hidden-desktop jb-navbar-menu-toggle\",\n        \"data-target\": \"navbar-menu\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"icon\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"mdi mdi-dots-vertical\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-menu fadeIn animated faster\",\n      id: \"navbar-menu\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-end\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navbar-item has-dropdown has-dropdown-with-icons has-divider has-user-avatar is-hoverable\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"navbar-link is-arrowless\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"is-user-avatar\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: preview !== null ? preview : \"http://localhost:3000/p\",\n                alt: name.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"is-user-name\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: name.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"mdi mdi-chevron-down\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 40\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"navbar-dropdown\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: Logout,\n              className: \"navbar-item is-danger\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"icon\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"mdi mdi-logout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 42\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Log Out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Navbar, \"cHxpWgV5z7H9/ugbgLMx7XbR7Ss=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Navbar;\nexport default Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jwt_decode","axios","Navbar","name","setName","preview","setPreview","expire","setExpire","token","setToken","navigate","refreshToken","Me","response","get","data","accessToken","decoded","exp","error","url","axiosJWT","create","interceptors","request","use","config","currentDate","Date","getTime","headers","Authorization","Promise","reject","Logout","delete","console","info","toUpperCase"],"sources":["C:/xampp/htdocs/JWT - Auth/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport jwt_decode from \"jwt-decode\";\nimport axios from 'axios';\n\nconst Navbar = () => {\n\n  \n  const [ name, setName] = useState('');\n  const [ preview, setPreview] = useState('');\n  const [ expire, setExpire] = useState([]);\n  const [ token, setToken] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n      refreshToken();\n      Me();\n  }, [])\n  \n  const refreshToken = async () => {\n      try {\n          const response = await axios.get('http://localhost:3001/token');\n          setToken(response.data.accessToken)\n          const decoded = jwt_decode(response.data.accessToken);\n          setExpire(decoded.exp);\n      } catch (error) {\n          if(error.response){\n              navigate('/');\n          }\n      }\n  }\n\n  const Me = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/me');\n      setPreview(response.data.url);\n      setName(response.data.name)\n    } catch (error) {\n      if(error.response){\n        navigate('/');\n      }\n    }\n  }\n\n  const axiosJWT = axios.create();\n\n  axiosJWT.interceptors.request.use( async(config) => {\n      const currentDate = new Date();\n      if(expire * 1000 < currentDate.getTime()){\n          const response = await axios.get('http://localhost:3001/token');\n          config.headers.Authorization = `Bearer ${response.data.accessToken}`;\n          setToken(response.data.accessToken);\n          const decoded = jwt_decode(response.data.accessToken);\n          setName(decoded.name);\n          setExpire(decoded.exp);\n      }\n      return config;\n  }, (error) => {\n      return Promise.reject(error) //\n  });\n\n  const Logout = async () => {\n    try {\n        await axios.delete('http://localhost:3001/logout');\n        navigate('/');\n    } catch (error) {\n        console.info(error);\n    }\n  }\n\n  return (\n    <nav id=\"navbar-main\" className=\"navbar is-fixed-top\">\n      <div className=\"navbar-brand\">\n        <a className=\"navbar-item is-hidden-desktop jb-aside-mobile-toggle\">\n            <span className=\"icon\"><i className=\"mdi mdi-forwardburger mdi-24px\"></i></span>\n        </a>\n        {/* <div className=\"navbar-item has-control\">\n            <div className=\"control\"><input placeholder=\"Search everywhere...\" className=\"input\"></input></div>\n        </div> */}\n      </div>\n      <div className=\"navbar-brand is-right\">\n      <a className=\"navbar-item is-hidden-desktop jb-navbar-menu-toggle\" data-target=\"navbar-menu\">\n          <span className=\"icon\"><i className=\"mdi mdi-dots-vertical\"></i></span>\n      </a>\n      </div>\n      <div className=\"navbar-menu fadeIn animated faster\" id=\"navbar-menu\">\n        <div className=\"navbar-end\">\n          {/* <div className=\"navbar-item has-dropdown has-dropdown-with-icons has-divider is-hoverable\">\n            <a className=\"navbar-link is-arrowless\">\n                <span className=\"icon\">\n                <i className=\"mdi mdi-menu\"></i>\n                </span>\n                <span>Sample Menu</span>\n                <span className=\"icon\">\n                <i className=\"mdi mdi-chevron-down\"></i>\n                </span>\n            </a>\n            <div className=\"navbar-dropdown\">\n                <a href=\"profile.html\" className=\"navbar-item is-active\">\n                  <span className=\"icon\"><i className=\"mdi mdi-account\"></i></span>\n                  <span>My Profile</span>\n                </a>\n                <a className=\"navbar-item\">\n                  <span className=\"icon\"><i className=\"mdi mdi-settings\"></i></span>\n                  <span>Settings</span>\n                </a>\n                <a className=\"navbar-item\">\n                  <span className=\"icon\"><i className=\"mdi mdi-email\"></i></span>\n                  <span>Messages</span>\n                </a>\n                <hr className=\"navbar-divider\"></hr>\n                <a className=\"navbar-item\">\n                  <span className=\"icon\"><i className=\"mdi mdi-logout\"></i></span>\n                  <span>Log Out</span>\n                </a>\n            </div>\n          </div> */}\n          <div className=\"navbar-item has-dropdown has-dropdown-with-icons has-divider has-user-avatar is-hoverable\">\n            <a className=\"navbar-link is-arrowless\">\n                <div className=\"is-user-avatar\">\n                <img src={preview !== null ? preview : \"http://localhost:3000/p\"} alt={name.toUpperCase()}></img>\n                </div>\n                <div className=\"is-user-name\">\n                <span>{name.toUpperCase()}</span>\n                </div>\n                <span className=\"icon\"><i className=\"mdi mdi-chevron-down\"></i></span>\n            </a>\n            <div className=\"navbar-dropdown\">\n                {/* <a href=\"profile.html\" className=\"navbar-item is-active\">\n                  <span className=\"icon\"><i className=\"mdi mdi-account\"></i></span>\n                  <span>My Profile</span>\n                </a>\n                <a className=\"navbar-item\">\n                  <span className=\"icon\"><i className=\"mdi mdi-settings\"></i></span>\n                  <span>Settings</span>\n                </a>\n                <a className=\"navbar-item\">\n                  <span className=\"icon\"><i className=\"mdi mdi-email\"></i></span>\n                  <span>Messages</span>\n                </a>\n                <hr className=\"navbar-divider\"></hr> */}\n                <a onClick={Logout} className=\"navbar-item is-danger\">\n                  <span className=\"icon\"><i className=\"mdi mdi-logout\"></i></span>\n                  <span>Log Out</span>\n                </a>\n          </div>\n          </div>\n          {/* <a href=\"https://justboil.me/bulma-admin-template/free-html-dashboard/\" title=\"About\" className=\"navbar-item has-divider is-desktop-icon-only\">\n            <span className=\"icon\"><i className=\"mdi mdi-help-circle-outline\"></i></span>\n            <span>About</span>\n          </a>\n          <a title=\"Log out\" className=\"navbar-item is-desktop-icon-only\">\n            <span className=\"icon\"><i className=\"mdi mdi-logout\"></i></span>\n            <span>Log out</span>\n          </a> */}\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}